# Ouroboros Node Configuration Template
# Copy this file to .env and customize for your node

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================

# PostgreSQL connection string
# Format: postgres://username:password@host:port/database
DATABASE_URL=postgres://ouro:ouro_pass@localhost:5432/ouro_db

# RocksDB local storage path (relative or absolute)
ROCKSDB_PATH=node_data/rocksdb

# ============================================================================
# NODE IDENTITY
# ============================================================================

# Unique identifier for this node (used in consensus)
NODE_ID=node-1

# ============================================================================
# NETWORK CONFIGURATION
# ============================================================================

# API server address (HTTP/HTTPS endpoint for clients)
# Format: IP:PORT
API_ADDR=0.0.0.0:8001

# P2P listen address (for peer-to-peer connections)
# Format: IP:PORT
LISTEN_ADDR=0.0.0.0:9001

# BFT consensus port (HotStuff protocol)
BFT_PORT=9091

# Comma-separated list of BFT peer addresses
# Format: IP:PORT,IP:PORT,...
# Example for 3-node cluster:
BFT_PEERS=127.0.0.1:9092,127.0.0.1:9093

# ============================================================================
# SECURITY & AUTHENTICATION
# ============================================================================

# BFT secret seed (64-character hex string for validator keys)
# IMPORTANT: Keep this secret! Generate unique value for each node.
# Generate with: openssl rand -hex 32
BFT_SECRET_SEED=1111111111111111111111111111111111111111111111111111111111111111

# API keys for client authentication (comma-separated)
API_KEYS=your-secure-api-key-here

# Anchor service private key (optional, for mainchain anchoring)
# Leave empty to disable anchor operations
# ANCHOR_PRIVATE_KEY=

# ============================================================================
# TLS/SSL CONFIGURATION (Optional - for HTTPS)
# ============================================================================

# Path to TLS certificate file
# TLS_CERT_PATH=/path/to/cert.pem

# Path to TLS private key file
# TLS_KEY_PATH=/path/to/key.pem

# ============================================================================
# LOGGING
# ============================================================================

# Rust log level: error, warn, info, debug, trace
RUST_LOG=info

# ============================================================================
# PERFORMANCE TUNING (Advanced)
# ============================================================================

# Maximum database connections in pool (default: 100)
# MAX_DB_CONNECTIONS=100

# Batch writer flush interval in milliseconds (default: 100)
# BATCH_FLUSH_INTERVAL_MS=100

# Batch size before automatic flush (default: 500)
# BATCH_SIZE=500

# ============================================================================
# TESTING & DEVELOPMENT (Do NOT use in production!)
# ============================================================================

# Use insecure mode (skip TLS verification, etc.)
# INSECURE_MODE=false

# Enable test mode (shorter timeouts, relaxed validation)
# TEST_MODE=false

# ============================================================================
# v0.3.0 FEATURES - NODE IDENTITY & WALLET LINKING
# ============================================================================

# Node identity file path (stores persistent node ID and metadata)
# Default: {ROCKSDB_PATH}/.node_identity.json
# IDENTITY_PATH=node_data/.node_identity.json

# Node keypair path (Ed25519 keypair for wallet linking signatures)
# Default: {ROCKSDB_PATH}/.node_keypair
# NODE_KEYPAIR_PATH=node_data/.node_keypair

# Wallet link file path (stores wallet-to-node link with dual signatures)
# Default: {ROCKSDB_PATH}/.wallet_link.json
# WALLET_LINK_PATH=node_data/.wallet_link.json

# Update config file path (stores auto-update settings)
# Default: {ROCKSDB_PATH}/.update_config.json
# UPDATE_CONFIG_PATH=node_data/.update_config.json

# Storage mode: "postgres" for full node, "rocks" for lightweight node
# Default: postgres
STORAGE_MODE=rocks

# ============================================================================
# NOTES
# ============================================================================
#
# 1. For production deployments:
#    - Generate unique BFT_SECRET_SEED for each validator
#    - Use strong API_KEYS (min 32 characters, random)
#    - Enable TLS/SSL (set TLS_CERT_PATH and TLS_KEY_PATH)
#    - Never commit .env file to version control!
#
# 2. Multi-node setup:
#    - Each node needs unique NODE_ID, API_ADDR, LISTEN_ADDR, BFT_PORT
#    - All nodes must share same DATABASE_URL (or use replication)
#    - BFT_PEERS should list OTHER nodes (not self)
#    - BFT_SECRET_SEED must be unique per node
#
# 3. Database setup:
#    - Run migrations before starting: cargo run --bin migrate
#    - Ensure PostgreSQL is running and accessible
#    - Create database: CREATE DATABASE ouro_db;
#    - Create user: CREATE USER ouro WITH PASSWORD 'ouro_pass';
#    - Grant permissions: GRANT ALL PRIVILEGES ON DATABASE ouro_db TO ouro;
#
# 4. Monitoring:
#    - Check logs: RUST_LOG=debug for verbose output
#    - Health check: curl http://localhost:8001/health
#    - Metrics: Use Prometheus exporters (optional)
#
# ============================================================================
