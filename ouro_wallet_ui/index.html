<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ouroboros Wallet</title>
    <link rel="stylesheet" href="/src/styles.css">
</head>
<body>
    <div class="app">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="logo">
                <h1>üî∑ Ouroboros</h1>
                <p>Wallet v0.3.0</p>
            </div>
            <nav class="nav">
                <button class="nav-item active" data-page="dashboard">
                    <span class="icon">üìä</span>
                    Dashboard
                </button>
                <button class="nav-item" data-page="send">
                    <span class="icon">üí∏</span>
                    Send
                </button>
                <button class="nav-item" data-page="receive">
                    <span class="icon">üì•</span>
                    Receive
                </button>
                <button class="nav-item" data-page="microchains">
                    <span class="icon">‚õìÔ∏è</span>
                    Microchains
                </button>
                <button class="nav-item" data-page="history">
                    <span class="icon">üìú</span>
                    History
                </button>
                <button class="nav-item" data-page="settings">
                    <span class="icon">‚öôÔ∏è</span>
                    Settings
                </button>
            </nav>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Welcome Screen (shown if no wallet) -->
            <div id="welcome-screen" class="page">
                <div class="welcome-container">
                    <h1>Welcome to Ouroboros Wallet</h1>
                    <p>Get started by creating a new wallet or importing an existing one</p>
                    <div class="welcome-actions">
                        <button class="btn btn-primary" onclick="showCreateWallet()">
                            Create New Wallet
                        </button>
                        <button class="btn btn-secondary" onclick="showImportWallet()">
                            Import Wallet
                        </button>
                    </div>
                </div>
            </div>

            <!-- Dashboard -->
            <div id="dashboard" class="page" style="display: none;">
                <div class="page-header">
                    <h2>Dashboard</h2>
                    <button class="btn btn-small" onclick="refreshBalance()">üîÑ Refresh</button>
                </div>

                <div class="balance-card">
                    <div class="balance-label">Total Balance</div>
                    <div class="balance-amount" id="main-balance">0.00</div>
                    <div class="balance-currency">OURO</div>
                    <div class="balance-pending" id="pending-balance">Pending: 0.00 OURO</div>
                </div>

                <div class="wallet-info">
                    <div class="info-row">
                        <span class="info-label">Address:</span>
                        <span class="info-value" id="wallet-address">-</span>
                        <button class="btn-icon" onclick="copyAddress()" title="Copy">üìã</button>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Public Key:</span>
                        <span class="info-value" id="wallet-pubkey">-</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Name:</span>
                        <span class="info-value" id="wallet-name">-</span>
                    </div>
                </div>

                <div class="quick-actions">
                    <button class="action-btn" onclick="switchPage('send')">
                        <span class="action-icon">üí∏</span>
                        <span>Send</span>
                    </button>
                    <button class="action-btn" onclick="switchPage('receive')">
                        <span class="action-icon">üì•</span>
                        <span>Receive</span>
                    </button>
                    <button class="action-btn" onclick="linkToNode()">
                        <span class="action-icon">üîó</span>
                        <span>Link to Node</span>
                    </button>
                </div>
            </div>

            <!-- Send Page -->
            <div id="send" class="page" style="display: none;">
                <div class="page-header">
                    <h2>Send OURO</h2>
                </div>

                <form class="form" onsubmit="sendTransaction(event)">
                    <div class="form-group">
                        <label>Chain</label>
                        <select id="send-chain" onchange="updateSendForm()">
                            <option value="mainchain">Mainchain</option>
                            <option value="microchain">Microchain</option>
                        </select>
                    </div>

                    <div id="microchain-select" class="form-group" style="display: none;">
                        <label>Select Microchain</label>
                        <select id="send-microchain-id"></select>
                    </div>

                    <div class="form-group">
                        <label>Recipient Address</label>
                        <input type="text" id="send-to" placeholder="ouro1..." required>
                    </div>

                    <div class="form-group">
                        <label>Amount</label>
                        <input type="number" id="send-amount" placeholder="0.00" step="0.01" min="0" required>
                    </div>

                    <button type="submit" class="btn btn-primary">Send Transaction</button>
                </form>
            </div>

            <!-- Receive Page -->
            <div id="receive" class="page" style="display: none;">
                <div class="page-header">
                    <h2>Receive OURO</h2>
                </div>

                <div class="receive-container">
                    <div class="qr-placeholder">
                        <div class="qr-code" id="qr-code">QR Code</div>
                    </div>
                    <div class="receive-address">
                        <label>Your Address</label>
                        <div class="address-display">
                            <input type="text" id="receive-address" readonly>
                            <button class="btn btn-small" onclick="copyAddress()">Copy</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Microchains Page -->
            <div id="microchains" class="page" style="display: none;">
                <div class="page-header">
                    <h2>Microchains</h2>
                    <button class="btn btn-small" onclick="refreshMicrochains()">üîÑ Refresh</button>
                </div>

                <div id="microchains-list" class="microchains-list">
                    <div class="empty-state">No microchains found</div>
                </div>
            </div>

            <!-- History Page -->
            <div id="history" class="page" style="display: none;">
                <div class="page-header">
                    <h2>Transaction History</h2>
                    <button class="btn btn-small" onclick="refreshHistory()">üîÑ Refresh</button>
                </div>

                <div id="history-list" class="history-list">
                    <div class="empty-state">No transactions yet</div>
                </div>
            </div>

            <!-- Settings Page -->
            <div id="settings" class="page" style="display: none;">
                <div class="page-header">
                    <h2>Settings</h2>
                </div>

                <div class="settings-section">
                    <h3>Node Connection</h3>
                    <div class="form-group">
                        <label>Node URL</label>
                        <input type="text" id="node-url" value="http://localhost:8001">
                        <button class="btn btn-small" onclick="saveNodeUrl()">Save</button>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>Security</h3>
                    <button class="btn btn-secondary" onclick="exportMnemonic()">
                        Export Recovery Phrase
                    </button>
                </div>

                <div class="settings-section">
                    <h3>Wallet</h3>
                    <button class="btn btn-danger" onclick="confirmDeleteWallet()">
                        Delete Wallet
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <div id="modal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="modal-close" onclick="closeModal()">&times;</span>
            <div id="modal-body"></div>
        </div>
    </div>

    <script type="module" src="/src/main.js"></script>
</body>
</html>
